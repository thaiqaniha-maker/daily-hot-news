name: 每日热点推送

on:
  schedule:
    # 每天早上 8:00 和晚上 20:00 推送（北京时间）
    # GitHub Actions 使用 UTC 时间，所以要减 8 小时
    - cron: '0 0 * * *'   # UTC 0:00 = 北京时间 8:00
    - cron: '0 12 * * *'  # UTC 12:00 = 北京时间 20:00
  workflow_dispatch:  # 支持手动触发

jobs:
  push-hot-news:
    runs-on: ubuntu-latest
    
    steps:
      - name: 检出代码
        uses: actions/checkout@v4
      
      - name: 设置 Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: 安装依赖
        run: |
          pip install requests
      
      - name: 抓取热点并推送
        env:
          FEISHU_WEBHOOK_URL: ${{ secrets.FEISHU_WEBHOOK_URL }}
        run: |
          python scripts/hot_news.py
